# Cursor AI Rules for Linux System Initializer Project

## üö® CRITICAL EXECUTION RULES

### üîç ENVIRONMENT DETECTION
**Important**: Check the user's environment before applying execution rules:
- **WSL (Windows Subsystem for Linux)**: Shell contains `wsl.exe` or OS shows `win32` with Linux environment
- **Standard Windows/Mac**: Regular desktop environments
- **Linux Native**: Direct Linux installations

### ‚ö†Ô∏è EXECUTION RESTRICTIONS (Environment-Dependent)

#### For NON-WSL environments:
- **NEVER** execute any project scripts on the local development machine
- **NEVER** run ./install.sh, ./run.sh, or python main.py locally
- **NEVER** install dependencies or create virtual environments locally
- **NEVER** suggest running any project scripts on the local machine

#### For WSL environments:
- ‚úÖ **ALLOWED**: Local testing and development
- ‚úÖ **ALLOWED**: Creating virtual environments for testing
- ‚úÖ **ALLOWED**: Running scripts locally for development/testing
- ‚ö†Ô∏è **RECOMMENDED**: Still prefer remote execution for production

### ‚úÖ CORRECT WORKFLOW

#### Default (Remote Execution):
- All scripts MUST be executed on remote server (192.168.0.33)
- Use rsync to sync code to remote server first
- SSH to remote server before executing any scripts
- Always remind user to execute on remote server

#### WSL Exception:
- Local testing and development is permitted
- Can create `initializer-venv` locally for testing
- Can run `./install.sh`, `./run.sh`, `python main.py` locally
- Still recommend final testing on remote server

## üìã STANDARD COMMANDS

### File Synchronization (Local execution OK)
```bash
rsync -avz --exclude='venv/' --exclude='initializer-venv/' \
  --exclude='__pycache__/' --exclude='*.pyc' \
  --exclude='.git/' --exclude='.idea/' \
  --exclude='logs/' --exclude='.DS_Store' \
  ./ root@192.168.0.33:~/Initializer/
```

### Remote Execution (Remote server only)
```bash
# SSH to remote server first
ssh root@192.168.0.33

# Then execute in remote environment
cd ~/Initializer
./install.sh
./run.sh
python main.py
```

## üõ†Ô∏è DEVELOPMENT GUIDELINES

### Code Changes
- Edit source code locally: src/, config/, *.py, *.sh files
- **WSL**: Can test changes locally before remote deployment
- **Non-WSL**: Test changes ONLY on remote server after syncing
- **WSL**: Can create local virtual environments for testing
- **Non-WSL**: Never create local virtual environments for this project

### Project Structure
- src/ - Python source code (edit locally)
- config/ - YAML configuration files (edit locally)
- legacy/ - Old bash scripts (reference only)
- install.sh, run.sh, main.py - Executable scripts (REMOTE ONLY)

### File Types by Location
- **Local editing**: .py, .yaml, .md, .sh source files
- **Remote execution**: install.sh, run.sh, main.py
- **Documentation**: README.md, DEVELOPMENT.md

## üö´ FORBIDDEN ACTIONS

### For NON-WSL environments only:
- `./install.sh` (locally)
- `./run.sh` (locally) 
- `python main.py` (locally)
- `pip install -r requirements.txt` (locally)
- `python -m venv venv` (locally for this project)
- Any system-level installation commands locally

### For WSL environments:
- ‚úÖ All above commands are **ALLOWED** for local testing
- ‚ö†Ô∏è **RECOMMEND** running final tests on remote server

### Suggested workflow:
#### For WSL users:
1. **Local testing**: `./install.sh`, `./run.sh`, `python main.py`
2. **Remote verification**: Sync and test on remote server
3. **Best practice**: Test locally first, verify remotely

#### For non-WSL users:
1. Sync to remote: `rsync -avz ... root@192.168.0.33:~/Initializer/`
2. SSH to remote: `ssh root@192.168.0.33`
3. Execute remotely: `cd ~/Initializer && ./install.sh`

## üìö PROJECT CONTEXT

### Purpose
Linux System Initializer - TUI application for automated Linux system setup using Python + Rich + Textual + YAML configuration.

### Architecture
- Modern Python project with pyproject.toml
- Textual-based TUI interface
- YAML-driven configuration system
- Modular design with preset support

### Key Dependencies
- rich, textual, pyyaml, click, psutil, distro
- Development: pytest, black, flake8, mypy

### Virtual Environment
- Name: `initializer-venv` (not `venv`)
- **WSL**: Can be created locally for testing
- **Non-WSL**: Created on remote server only
- **WSL**: Local venv allowed for development/testing
- **Non-WSL**: Never create locally for this project

## üéØ AI ASSISTANT BEHAVIOR

### Environment Detection First:
1. **Check user environment** (WSL vs non-WSL)
2. **Apply appropriate rules** based on detected environment
3. **Inform user** of available options based on their environment

### When user asks to run scripts:
#### For WSL users:
1. **OFFER** local testing option first
2. **RECOMMEND** remote verification after local testing
3. Provide both local and remote execution commands
4. Suggest best practice workflow

#### For non-WSL users:
1. **STOP** and remind about remote execution rule
2. Provide rsync command to sync code first
3. Provide SSH and remote execution commands
4. Reference project documentation for guidelines

### When suggesting code changes:
1. Focus on editing source files locally
2. **WSL**: Suggest local testing before remote deployment
3. **Non-WSL**: Always mention syncing to remote after changes
4. **WSL**: Can suggest testing locally
5. **Non-WSL**: Guide user through remote testing process

### When user reports errors:
#### For WSL users:
1. Help debug local environment issues first
2. If local fails, suggest remote testing
3. Provide environment-specific solutions

#### For non-WSL users:
1. Ask if error occurred on remote server
2. If local execution attempted, redirect to remote
3. Help debug remote environment issues
4. Provide remote-specific solutions

## üìñ REFERENCE DOCUMENTS

- README.md - Project documentation
- DEVELOPMENT.md - Development guide
- .cursor/instructions.md - Project context for AI

## üîÑ WORKFLOW REMINDERS

### Every coding session:
1. Edit code locally
2. Sync to remote with rsync
3. SSH to remote server
4. Execute and test remotely

### Every suggestion:
1. Check if it involves script execution
2. Ensure remote execution if needed
3. Provide complete workflow steps
4. Reference rule documentation

---

**REMEMBER**: 
- **WSL users**: Can test locally, but verify remotely for production
- **Non-WSL users**: This project REQUIRES remote execution. Local script execution is FORBIDDEN.
- **Always check user environment** before applying execution rules